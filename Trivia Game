import random
import json
import math
import os.path

def loadQuestions(filename):
  with open(filename) as f:
    data = f.read()
      
  questions = json.loads(data)

  return questions  

def healthTriviaGame():
  questions = loadQuestions("healthTrivia.txt")
  totalQ = int(10)
  rset = random.sample(list(questions), totalQ)
  print()
  count = int(1)
  correct = int(0)
  print("Enter X to go back to quit game and go back to the main menu at any time.\n")
  for q in rset:
      print("Question #", count, ": \n % s" % q)
      print()
      userinput = input("Your answer: ")
      print()
      if userinput.lower() in questions[q].lower():
        print("Correct!\n")
        correct += 1
        count +=1
      if userinput.lower() not in questions[q].lower():
          if userinput.lower() != "x":
              print("Incorrect!  The correct answer is: ", questions[q])
              print()  
              count +=1
          else:
            return
  percentageCorrect = (correct / totalQ) * 100 
  print("You answered", correct, "out of", totalQ, "questions correctly.  You scored", math.trunc(percentageCorrect), "%.\n")

def historyTriviaGame():
  questions = loadQuestions("historyTrivia.txt")
  totalQ = int(10)
  rset = random.sample(list(questions), totalQ)
  print()
  count = int(1)
  correct = int(0)
  print("Enter X to go back to quit game and go back to the main menu at any time.\n")
  for q in rset:
      print("Question #", count, ": \n % s" % q)
      print()
      userinput = input("Your answer: ")
      print()
      if userinput.lower() in questions[q].lower():
        print("Correct!\n")
        correct += 1
        count +=1
      if userinput.lower() not in questions[q].lower():
          if userinput.lower() != "x":
              print("Incorrect!  The correct answer is: ", questions[q])
              print() 
              count +=1 
          else:
            return
  percentageCorrect = (correct / totalQ) * 100 
  print("You answered", correct, "out of", totalQ, "questions correctly.  You scored", math.trunc(percentageCorrect), "%.\n")

def biologyTriviaGame():
    questions = loadQuestions("biologyTrivia.txt")
    totalQ = int(10)
    rset = random.sample(list(questions), totalQ)
    print()
    count = int(1)
    correct = int(0)
    print("Enter X to go back to quit game and go back to the main menu at any time.\n")
    for q in rset:
        print("Question #", count, ": \n % s" % q)
        print()
        userinput = input("Your answer: ")
        print()
        if userinput.lower() in questions[q].lower():
          print("Correct!\n")
          correct += 1
          count +=1
        if userinput.lower() not in questions[q].lower():
            if userinput.lower() != "x":
                print("Incorrect!  The correct answer is: ", questions[q])
                print() 
                count +=1 
            else:
              return
    percentageCorrect = (correct / totalQ) * 100 
    print("You answered", correct, "out of", totalQ, "questions correctly.  You scored", math.trunc(percentageCorrect), "%.\n")
  
def spanishTriviaGame():
    print("Enter the English translation for each of the following Spanish words/phrases:")
    questions = loadQuestions("spanishTrivia.txt")
    totalQ = int(10)
    rset = random.sample(list(questions), totalQ)
    print()
    count = int(1)
    correct = int(0)
    print("Enter X to go back to quit game and go back to the main menu at any time.\n")
    for q in rset:
        print("Question #", count, ": \n % s" % q)
        print()
        userinput = input("Your answer: ")
        print()
        if userinput.lower() in questions[q].lower():
          print("Correct!\n")
          correct += 1
          count +=1
        if userinput.lower() not in questions[q].lower():
            if userinput.lower() != "x":
                print("Incorrect!  The correct answer is: ", questions[q])
                print() 
                count +=1 
            else:
              return
    percentageCorrect = (correct / totalQ) * 100 
    print("You answered", correct, "out of", totalQ, "questions correctly.  You scored", math.trunc(percentageCorrect), "%.\n")

def geographyTriviaGame():
    questions = loadQuestions("geographyTrivia.txt")
    totalQ = int(10)
    rset = random.sample(list(questions), totalQ)
    print()
    count = int(1)
    correct = int(0)
    print("Enter X to go back to quit game and go back to the main menu at any time.\n")
    for q in rset:
        print("Question #", count, ": \n % s" % q)
        print()
        userinput = input("Your answer: ")
        print()
        if userinput.lower() in questions[q].lower():
          print("Correct!\n")
          correct += 1
          count +=1
        if userinput.lower() not in questions[q].lower():
            if userinput.lower() != "x":
                print("Incorrect!  The correct answer is: ", questions[q])
                print() 
                count +=1 
            else:
              return
    percentageCorrect = (correct / totalQ) * 100 
    print("You answered", correct, "out of", totalQ, "questions correctly.  You scored", math.trunc(percentageCorrect), "%.\n")       

def createCustomTriviaGame():
  questions = []
  question = ""
  answer = ""
  i = int(0)
  print("Enter X when you are done with creating your trivia game.")
  for i in range(0, 100):
    question = input("Enter a trivia question: ")
    if(question == "x" or question == "X"):
      break
    questions.append(question)
    answer = input("Enter the answer to this question: ")
    if(answer == "x" or answer == "X"):
      break
    questions.append(answer) 
  questionsDict = {questions[i]: questions[i + 1] for i in range(0, len(questions), 2)}
  print(questionsDict)
  print("To save this set of trivia questions and answers, enter a filename:")
  filename = input()
  with open(filename, 'w') as file:
        json.dump(questionsDict, file)
        print("File successfully saved\n")

def playCustomTriviaGame():
  print("Please type in the full filename of the file that contains the custom trivia game you would like to play:")
  filename = input()
  exists = os.path.exists(filename)
  while(not exists):
    print("Error: File not found!  Please enter the correct filename:")
    filename = input()
    if(os.path.exists(filename)):
      break
  questions = loadQuestions(filename)
  totalQ = int(10)
  rset = random.sample(list(questions), totalQ)
  print()
  count = int(1)
  correct = int(0)
  print("Enter X to go back to quit game and go back to the main menu at any time.\n")
  for q in rset:
      print("Question #", count, ": \n % s" % q)
      print()
      userinput = input("Your answer: ")
      print()
      if userinput.lower() in questions[q].lower():
        print("Correct!\n")
        correct += 1
        count +=1
      if userinput.lower() not in questions[q].lower():
          if userinput.lower() != "x":
              print("Incorrect!  The correct answer is: ", questions[q])
              print() 
              count +=1 
          else:
            return
  percentageCorrect = (correct / totalQ) * 100 
  print("You answered", correct, "out of", totalQ, "questions correctly.  You scored", math.trunc(percentageCorrect), "%.\n")

choice = ""
print("TRIVIA GAME\n")
while(choice != "H" or choice != "h"):
  print("Please type in a letter to select one of the following menu options:")
  print("A: Health Trivia Game")
  print("B: History Trivia Game")
  print("C: Biology Trivia Game")
  print("D: Spanish Trivia Game")
  print("E: Geography Trivia Game")
  print("F: Create Custom Trivia Game")
  print("G: Play Custom Trivia Game")
  print("H: Exit Program")
  choice = input()
  if(choice == "A" or choice == "a"):
    healthTriviaGame()
  elif(choice == "B" or choice == "b"):
    historyTriviaGame()
  elif(choice == "C" or choice == "c"):
    biologyTriviaGame()
  elif(choice == "D" or choice == "d"):
    spanishTriviaGame()
  elif(choice == "E" or choice == "e"):
    geographyTriviaGame()
  elif(choice == "F" or choice == "f"):
    createCustomTriviaGame()
  elif(choice == "G" or choice == "g"):
    playCustomTriviaGame()
  elif(choice == "H" or choice == "h"):
    break
  else:
    print("You selected an incorrect choice.  Try again.\n")
